<!DOCTYPE html>
<html class="no-js" lang="zh-CN">

<head profile="http://gmpg.org/xfn/11">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="https://antscript.com/favicon.ico" type="image/x-icon">
    <title>iOS/macOS ä¸­æ˜¾ç¤ºå¸¦é¢œè‰²çš„æ—¥å¿—ä¿¡æ¯ | åªæƒ³å®‰é™çš„åšä¸ªç å†œ</title>
    <script>
    document.documentElement.className = document.documentElement.className.replace("no-js", "js");
    </script>
    <link href="https://antscript.com/index.xml" rel="alternate" type="application/rss+xml" title="AntScript" />
    <link href="https://antscript.com/index.xml" rel="feed" type="application/rss+xml" title="AntScript &raquo; Feed " />
    <link rel='stylesheet' id='lingonberry_style-css' href='https://cdn.antscript.com/@/antscript.com/static/v1/css/style.min.css?ver=4.0.10' type='text/css' media='all' />
    <script type='text/javascript' src='https://cdn.antscript.com/@/antscript.com/static/v1/js/jquery.min.js?ver=1.10.2'></script>
    
    <style type="text/css">
    body a {
        color: #353535;
    }

    body a:hover {
        color: #353535;
    }

    .header {
        background: #353535;
    }

    .post-bubbles a:hover {
        background-color: #353535;
    }

    .mejs-horizontal-volume-current {
        background-color: #353535;
    }

    .post-nav a:hover {
        background-color: #353535;
    }

    .comment-meta-content cite a:hover {
        color: #353535;
    }

    .comment-meta-content p a:hover {
        color: #353535;
    }

    .comment-actions a:hover {
        background-color: #353535;
    }

    .widget-content .textwidget a:hover {
        color: #353535;
    }

    .widget_archive li a:hover {
        color: #353535;
    }

    .widget_categories li a:hover {
        color: #353535;
    }

    .widget_meta li a:hover {
        color: #353535;
    }

    .widget_nav_menu li a:hover {
        color: #353535;
    }

    .widget_rss .widget-content ul a.rsswidget:hover {
        color: #353535;
    }

    #wp-calendar thead {
        color: #353535;
    }

    .widget_tag_cloud a:hover {
        background: #353535;
    }

    .search-button:hover .genericon {
        color: #353535;
    }

    .flexslider:hover .flex-next:active {
        color: #353535;
    }

    .flexslider:hover .flex-prev:active {
        color: #353535;
    }

    .post-title a:hover {
        color: #353535;
    }

    .post-content a {
        color: #353535;
    }

    .post-content a:hover {
        color: #353535;
    }

    .post-content a:hover {
        border-bottom-color: #353535;
    }

    .post-content fieldset legend {
        background: #353535;
    }

    .post-content input[type="submit"]:hover {
        background: #353535;
    }

    .post-content input[type="button"]:hover {
        background: #353535;
    }

    .post-content input[type="reset"]:hover {
        background: #353535;
    }

    .comment-header h4 a:hover {
        color: #353535;
    }

    .form-submit #submit:hover {
        background-color: #353535;
    }

    @media screen and (min-width: 900px) {
      #app
      {
          z-index: 8000;
          position: fixed;
          text-indent: -99999px;
          width: 100px;
          display: block;
          background: url(https://cdn.antscript.com/@/antscript.com/static/v1/blog/img/app.png) no-repeat 0px 0px;
          height: 100px;
          top: 0px;
          cursor: pointer;
          right: 0px;
      }
    }
    </style>
    
</head>


<body class="single single-post postid-294 single-format-standard has-featured-image">
    
<div class="navigation">
    <div class="navigation-inner section-inner">
        <ul class="blog-menu">
            <li id="menu-item-00" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children has-children menu-item-194"><a>Projects</a>
                <ul class="sub-menu">
                    
                    <li id="menu-item-project-14" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://layautoapp.com" target="_blank">LayAuto</a></li>
                    
                    <li id="menu-item-project-22" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://ticktock.today" target="_blank">Tick Tock Today</a></li>
                    
                    <li id="menu-item-project-25" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://itunes.apple.com/app/devcost-cost-tool-for-developer/id1209838272" target="_blank">DevCost</a></li>
                    
                    <li id="menu-item-project-27" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://aapp.space/idsafer/" target="_blank">IDSafer</a></li>
                    
                    <li id="menu-item-project-53" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="" target="_blank">Projects</a></li>
                    
                </ul>
            </li>
            <li id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children has-children menu-item-268"><a>Open Source</a>
                <ul class="sub-menu">
                    
                    <li id="menu-item-opensource-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://github.com/antscript/ASLauncherMac" target="_blank">ASLauncherMac</a></li>
                    
                    <li id="menu-item-opensource-30" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://github.com/antscript/ASHUD" target="_blank">ASHUD</a></li>
                    
                    <li id="menu-item-opensource-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="https://github.com/antscript/DockerWeb" target="_blank">DockerWeb</a></li>
                    
                    <li id="menu-item-opensource-51" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-195"><a href="" target="_blank">Open sources</a></li>
                    
                </ul>
            </li>
            <li id="menu-item-22" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-268"><a href="mailto:antscript@gmail.com" target="_blank">antscript@gmail.com</a></li>
        </ul>
        
        <div class="clear"></div>
    </div>
    
</div>

<div class="header section">
    <div class="header-inner section-inner">
        <a href="https://antscript.com/" title="AntScript &mdash; åªæƒ³å®‰é™çš„åšä¸ªç å†œ" rel="home" class="logo">
            <img src="https://cdn.antscript.com/@/antscript.com/static/v1/img/logo.jpg" alt="AntScript">
        </a>
        <h1 class="blog-title">
                    <a href="https://antscript.com/" title="AntScript &mdash; åªæƒ³å®‰é™çš„åšä¸ªç å†œ" rel="home">AntScript</a>
                </h1>
        <div class="nav-toggle">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    
</div>

    <div class="content section-inner">
        <div class="posts">
            <div id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-develop">
                <div class="post-bubbles">
                    <a href="https://antscript.com/post/2018-09-12-display-ansi-escape-code/" class="format-bubble" title="iOS/macOS ä¸­æ˜¾ç¤ºå¸¦é¢œè‰²çš„æ—¥å¿—ä¿¡æ¯"></a>
                </div>
                <div class="content-inner">
                    <div class="post-header">
                        
                        <div class="featured-media">
                            <img width="766" height="284" src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/display-ansi-escape-code-title.png" class="attachment-post-image wp-post-image" alt="iOS/macOS ä¸­æ˜¾ç¤ºå¸¦é¢œè‰²çš„æ—¥å¿—ä¿¡æ¯" />
                        </div>
                        
                        
                        <h2 class="post-title">iOS/macOS ä¸­æ˜¾ç¤ºå¸¦é¢œè‰²çš„æ—¥å¿—ä¿¡æ¯</h2>
                    </div>
                    
                    <div class="post-content">
                        <p>éœ€è¦å°†è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ï¼Œå‡ ç»å‘¨æŠ˜ç»ˆäºå®ç°äº†ã€‚</p>

<p></p>

<p><a name="chapter1"></a></p>

<h4 id="é—®é¢˜"><strong>é—®é¢˜</strong></h4>

<p>ç”±äºæŸä¸ªæ¨¡å—éœ€è¦å°† fastlane è¾“å‡ºçš„æ—¥å¿—åœ¨ TextView ä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œå…¶ä¸­ä¸»è¦çš„é—®é¢˜æ˜¯ï¼š
<p><strong>è¾“å‡ºçš„æ—¥å¿—å«æœ‰æ ‡æ˜æ–‡æœ¬é¢œè‰²çš„ä¿¡æ¯ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºå¯ä»¥åœ¨ TextView ä¸­æ­£å¸¸æ˜¾ç¤ºçš„æ ¼å¼åŒ–æ–‡æœ¬ã€‚</strong></p></p>

<pre><code>
[10:05:37]: \u{1B}[33mfastlane detected a Gemfile in the current directory\u{1B}[0m\n[10:05:37]: \u{1B}[33mhowever it seems like you don\'t use `bundle exec`\u{1B}[0m\n[10:05:37]: \u{1B}[33mto launch fastlane faster, please use\u{1B}[0m\n[10:05:37]: \n[10:05:37]: \u{1B}[36m$ bundle exec fastlane beta\u{1B}[0m\n[10:05:37]: \n[10:05:37]: \u{1B}[33mGet started using a Gemfile for fastlane https://docs.fastlane.tools/getting-started/ios/setup/#use-a-gemfile\u{1B}[0m\n[10:05:37]: \u{1B}[31mWARNING: fastlane requires your locale to be set to UTF-8. To learn more go to https://docs.fastlane.tools/getting-started/ios/setup/#set-up-environment-variables\u{1B}[0m\n[10:05:39]: \u{1B}[32m------------------------------\u{1B}[0m\n[10:05:39]: \u{1B}[32m--- Step: default_platform ---\u{1B}[0m\n[10:05:39]: \u{1B}[32m------------------------------\u{1B}[0m\n[10:05:39]: \u{1B}[32mDriving the lane \'ios beta\' ğŸš€\u{1B}[0m\n
.....
</code></pre>

<p><a name="chapter2"></a></p>

<h4 id="è§£å†³è¿‡ç¨‹"><strong>è§£å†³è¿‡ç¨‹</strong></h4>

<ul>
<li>å¼€å§‹å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œgoogle ä¹‹ï¼Œæ²¡å‘ç°åŸç”ŸåŠŸèƒ½ä¸­æœ‰ç›¸å…³ä¿¡æ¯æˆ–ç°æˆå¯ç”¨çš„è½®å­ã€‚</li>
<li>æŸ¥é˜…èµ„æ–™ï¼ŒçŸ¥é“äº†è¿™ç§æ–‡æœ¬å« <code>ANSI Escape Code</code> <a href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97">(ç»´åŸºç™¾ç§‘)</a>ã€‚</li>
<li>å¯»æ€ç€åªèƒ½å°†å…¶å…ˆè½¬æ¢ä¸º <code>NSAttributedString</code> æˆ– <code>HTML</code> ï¼Œç„¶åå†æ˜¾ç¤ºå‡ºæ¥ã€‚</li>
<li>æ‰¾åˆ°ä¸€ä¸ªå¯è½¬æ¢ä¸º HTML çš„ JS ç»„ä»¶ï¼Œä½†éœ€è¦ç”¨ WebView æ¥å±•ç¤ºï¼Œä½œä¸º Plan Bï¼Œç»§ç»­æ‰¾ã€‚</li>
<li>ç»ˆäºæ‰¾åˆ°ä¸€ä¸ªè¿œå¤çš„åº“ <a href="https://github.com/ali-rantakari/ANSIEscapeHelper">https://github.com/ali-rantakari/ANSIEscapeHelper</a>ï¼Œå¯å°† <code>ANSI Escape Code</code> è½¬ä¸º <code>NSAttributedString</code>ï¼Œæµ‹è¯•å¯ç”¨ï¼ŒğŸ‰ğŸ‰ğŸ‰ã€‚</li>
</ul>

<p><img src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/p1.png" alt="p1" /></p>

<p><a name="chapter3"></a></p>

<h4 id="æ”¹è¿›"><strong>æ”¹è¿›</strong></h4>

<ul>
<li>é¦–å…ˆå‘ç°çš„é—®é¢˜æ˜¯åœ¨ç™½è‰²èƒŒæ™¯ä¸‹æµ…è‰²å­—ä½“å¾ˆéš¾çœ‹æ¸…
<img src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/p2.png" alt="p2" />
ä¿®æ”¹äº† ANSIEscapeHelper çš„æºç ï¼Œå°†æ˜¾ç¤ºæ–‡æœ¬é¢œè‰²å˜æš—ï¼Œé¡ºä¾¿æ”¹äº†ä¸‹é»˜è®¤çš„é¢œè‰²ï¼š</li>
</ul>

<pre><code>
#import &lt;Cocoa/Cocoa.h&gt;
@implementation NSColor  (LightAndDark)

- (NSColor *)lighterColor
{
	CGFloat h, s, b, a;
	[self getHue:&amp;h saturation:&amp;s brightness:&amp;b alpha:&amp;a];
	return [NSColor colorWithHue:h
					  saturation:s
					  brightness:MIN(b * 1.3, 1.0)
						   alpha:a];
}

- (NSColor *)darkerColor
{
	CGFloat h, s, b, a;
	[self getHue:&amp;h saturation:&amp;s brightness:&amp;b alpha:&amp;a];
	return [NSColor colorWithHue:h
					  saturation:s
					  brightness:b * 0.75
						   alpha:a];
}
@end

...

#define kDefaultANSIColorFgRed      [NSColor.redColor darkerColor]
#define kDefaultANSIColorFgGreen    [NSColor.greenColor darkerColor]
#define kDefaultANSIColorFgYellow   [NSColor.yellowColor darkerColor]
#define kDefaultANSIColorFgBlue     [NSColor.blueColor darkerColor]
#define kDefaultANSIColorFgMagenta  [NSColor.magentaColor darkerColor]
#define kDefaultANSIColorFgCyan     [NSColor.cyanColor darkerColor]

...

#define kDefaultForegroundColor NSColor.textColor

...

</code></pre>

<p>åŸºæœ¬è§£å†³ï¼š
<img src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/p4.png" alt="p4" /></p>

<ul>
<li>ç„¶åå‘ç°ä½¿ç”¨ç©ºæ ¼æ ¼å¼åŒ–çš„æ–‡æœ¬é”™ä½
<img src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/p3.png" alt="p3" /></li>
</ul>

<p>çŒœæµ‹æ˜¯é»˜è®¤å­—ä½“ä¸æ˜¯ç­‰å®½çš„é—®é¢˜ï¼Œæ¢äº†ç­‰å®½å­—ä½“ï¼š</p>

<pre><code>
textView.font = NSFont(name: &quot;Menlo&quot;, size: 12)
</code></pre>

<p>è§£å†³ï¼š
<img src="https://cdn.antscript.com/antscript.com/upload/images/2018-09-12/p5.png" alt="p5" /></p>
                    </div>
                    
                    <div class="post-meta">
                        <span class="post-date">2018-09-12 20:12:11 &#43;0800 CST</span>
                    </div>
                    
                    
                </div>
                
                <div class="clear"></div>
                <div class="post-nav">
                    
                    <a class="post-nav-older" title="Next post: Mac é”®ç›˜å¤±çµ" href="https://antscript.com/post/2019-05-15-mac-keyboard-failure/">&laquo; Mac é”®ç›˜å¤±çµ</a>
                    
                    
                    <a class="post-nav-newer" title="Previous post: åœ¨ WKWebView ä¸­æ³¨å…¥ js çš„æ—¶æœº" href="https://antscript.com/post/2018-06-28-wkwebview-js/">åœ¨ WKWebView ä¸­æ³¨å…¥ js çš„æ—¶æœº &raquo;</a>
                    
                    <div class="clear"></div>
                </div>
                
            </div>
            
        </div>
        
    </div>
    
    <div class="credits section">
    <div class="credits-inner section-inner">
        <p class="credits-left">
            <span>Copyright</span> &copy; 2014-2017 <a href="https://antscript.com/" title="AntScript"> AntScript.com</a>
        </p>
        <p class="credits-right">
            <span>Powered by <a href="http://www.hugo.org" target="_blank">Hugo</a> | Theme by <a href="http://www.andersnoren.se"  target="_blank">Anders Noren</a> &mdash; </span><a title="To the top" class="tothetop">Up &uarr;</a>
        </p>
        <div class="clear"></div>
    </div>
    
</div>
<script type='text/javascript' src='https://cdn.antscript.com/@/antscript.com/static/v1/js/global.js?ver=4.0.10'></script>
<div style="display:none"><script src="https://s4.cnzz.com/stat.php?id=1258630582&web_id=1258630582" language="JavaScript"></script></div>





</body>

</html>
